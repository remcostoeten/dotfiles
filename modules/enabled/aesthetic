#!/usr/bin/env bash

# Module: aesthetic
# Description: Aesthetic enhancements for a beautiful ricer terminal
# Author: remcostoeten
# Date: 2025-08-26

function aesthetic_init() {
    echo.debug "Initializing aesthetic ricer module"
    
    # Modern ls alternatives
    if command -v eza &>/dev/null; then
        alias ls='eza --color=always --group-directories-first --icons'
        alias la='eza --color=always --group-directories-first --icons --all'
        alias ll='eza --color=always --group-directories-first --icons --long --all'
        alias lt='eza --color=always --group-directories-first --icons --tree --level=2'
        alias lta='eza --color=always --group-directories-first --icons --tree --all --level=2'
        alias tree='eza --color=always --group-directories-first --icons --tree'
    fi
    
    # Modern cat with syntax highlighting
    if command -v bat &>/dev/null; then
        alias cat='bat --style=numbers,changes,header --color=always'
        alias catt='bat --style=full --color=always'
        export MANPAGER="sh -c 'col -bx | bat -l man -p'"
        export BAT_THEME="Dracula"
    fi
    
    # Enhanced grep
    if command -v rg &>/dev/null; then
        alias grep='rg --color=always --smart-case'
        alias rgg='rg --color=always --smart-case --hidden --no-ignore'
    fi
    
    # Better find
    if command -v fd &>/dev/null; then
        alias find='fd'
    elif command -v fdfind &>/dev/null; then
        alias find='fdfind'
        alias fd='fdfind'
    fi
    
    # Enhanced directory jumping with zoxide
    if command -v zoxide &>/dev/null; then
        eval "$(zoxide init zsh)" 2>/dev/null || eval "$(zoxide init bash)" 2>/dev/null
        alias cd='z'
        alias cdi='zi'
    fi
    
    # Git aliases for aesthetic workflow
    alias g='git'
    alias ga='git add'
    alias gaa='git add --all'
    alias gc='git commit -v'
    alias gcm='git commit -m'
    alias gco='git checkout'
    alias gd='git diff'
    alias gl='git log --oneline --graph --decorate --color=always'
    alias gp='git push'
    alias gs='git status -s'
    alias gst='git status'
    
    # Pretty system info
    alias sys='neofetch'
    alias sysinfo='neofetch'
    
    # Network and system monitoring
    alias ports='netstat -tulanp'
    alias myip='curl -s https://ipinfo.io/ip'
    alias speedtest='curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python3 -'
    
    # Directory operations
    alias ..='cd ..'
    alias ...='cd ../..'
    alias ....='cd ../../..'
    alias .....='cd ../../../..'
    alias ~='cd ~'
    alias -- -='cd -'
    
    # File operations with confirmation
    alias rm='rm -i'
    alias cp='cp -i'
    alias mv='mv -i'
    alias mkdir='mkdir -pv'
    
    # Archive operations
    alias tarxz='tar -xJf'
    alias targz='tar -xzf'
    alias tarbz='tar -xjf'
    
    # Process management
    alias psg='ps aux | grep'
    alias top='htop 2>/dev/null || top'
    
    # Quick edits
    alias v='${EDITOR}'
    alias vi='${EDITOR}'
    alias vim='${EDITOR}'
    alias nano='${EDITOR}'
    
    # Colorful output
    alias diff='diff --color=auto'
    alias ip='ip -color=auto'
    alias dmesg='dmesg --color=always'
    
    # Quick navigation
    alias home='cd ~'
    alias downloads='cd ~/Downloads'
    alias documents='cd ~/Documents'
    alias desktop='cd ~/Desktop'
    alias dev='cd ~/dev 2>/dev/null || cd ~/Development 2>/dev/null || cd ~/code'
}

function aesthetic_welcome() {
    if [[ "$TERM_PROGRAM" != "vscode" ]] && [[ -t 1 ]]; then
        echo
        echo.rainbow "╔═══════════════════════════════════════╗"
        echo.rainbow "║        Welcome to the Matrix         ║"
        echo.rainbow "╚═══════════════════════════════════════╝"
        echo
        
        # Show system info in a compact way
        if command -v neofetch &>/dev/null; then
            neofetch --config none --stdout | head -8
        fi
        echo
    fi
}

function aesthetic_help() {
    echo.header "Aesthetic Ricer Module"
    echo
    echo "Modern terminal enhancements:"
    echo.cyan "  File Operations:"
    echo "    ls/la/ll - Enhanced file listing with icons"
    echo "    cat      - Syntax highlighted file viewing"
    echo "    tree     - Beautiful directory tree"
    echo
    echo.cyan "  Navigation:"
    echo "    cd/z     - Smart directory jumping"
    echo "    ..       - Go up directories"
    echo "    -        - Go to previous directory"
    echo
    echo.cyan "  Git Integration:"
    echo "    g/gs/ga  - Quick git operations"
    echo "    gl       - Beautiful git log"
    echo
    echo.cyan "  System Info:"
    echo "    sys      - System information"
    echo "    myip     - Show public IP"
    echo
}

# Show welcome message on first load
if [[ -z "$AESTHETIC_LOADED" ]]; then
    export AESTHETIC_LOADED=1
    aesthetic_welcome
fi

alias ae='aesthetic_help'

aesthetic_init
