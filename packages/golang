#!/usr/bin/env fish

# Golang environment setup (modified to prevent PATH duplication)
set -gx GOPATH "$HOME/go"
set -gx GOROOT "$HOME/.go"
# Only add to PATH if not already present
if test -d "$GOPATH/bin"; and not contains "$GOPATH/bin" $PATH
    set -gx PATH "$GOPATH/bin" $PATH
end
alias go="$GOPATH/bin/g" # g-install: do NOT edit, see https://github.com/stefanmaric/g

# Safety check for go command
function go --description "Go command with safety check"
    if not command -v "$GOPATH/bin/g" &> /dev/null
        echo "Golang not found, please run \`bun run dev\` inside the dotfiles installer at \`/home/remcostoeten/.config/dotfiles/setup\`"
        return 1
    end
    command "$GOPATH/bin/g" $argv
end