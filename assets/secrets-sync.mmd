flowchart LR
  subgraph Local
    E[env.json]
    K1[(.env.key)]
    K2[(.env.salt)]
    E --> ENC[Encrypt -> env.vault]
    K1 -. used .- ENC
    K2 -. used .- ENC
  end

  ENC -->|push| G[(Private GitHub Gist: env.vault + metadata)]
  G -->|pull| DEC[Decrypt -> restore env.json]
  DEC --> E

  subgraph Tools
    ENV[dotfiles env]
    SYNC[dotfiles sync push/pull/status]
    BOOT[dotfiles secrets setup/discover/status]
  end

  ENV -. manage vars .-> E
  SYNC --> ENC
  BOOT --> G

  P[secrets-sync plugin (auto)] -. triggers .-> SYNC

